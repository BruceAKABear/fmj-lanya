{"version":3,"sources":["webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/main.js","webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue?d593","webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue?9f55","webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue?bd6b","webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue?4209","webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue","webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue?4213","webpack:///C:/Users/bear/Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue?ccba"],"names":["createPage","Page","data","checkV","defaultImg","youhuiCode","placeholder","cansubmit","canSubmitClass","canNotSubmitClass","methods","changeRadioV","oepnxieyi","uni","showModal","title","content","machObject","userProtocol","showCancel","success","res","confirm","gotoPay","that","phoneBlueToothCanUse","showToast","icon","mask","duration","bleConnectedStatus","writeServiceId","showLoading","startService","judgeBlueToothCanUse","commitOrderRequstNetWork","request","url","baseRequestUrl","method","orderFrom","userId","deviceImei","voucherCode","goodsInfo","JSON","stringify","commitGoodsArray","param","code","requestPayment","provider","timeStamp","nonceStr","package","prepayId","signType","paySign","sign","sysOrderId","chargeTimeOrder","order","length","writeBLECharacteristicValue","deviceId","serviceId","characteristicId","value","chargeIntervalTimmerId","setInterval","indexOf","responseOrder","clearInterval","clearTimeout","chargeTimeOutTimmerId","confirmOrder","closeBLEConnection","hideLoading","reLaunch","setTimeout","orderTime","Math","floor","setResponseOrder","i","substring","fail","err","console","error","message","closeBle","closeBluetoothAdapter","log","connectBle","openBluetoothAdapter","stopBluetoothDevicesDiscovery","createBLEConnection","getBLEDeviceCharacteristics","mainUUID","notifyBLECharacteristicValueChange","state","notifyUUID","writeUUID","checkOnlineOrder","errMsg","searchTimeoutId","startBluetoothDevicesDiscovery","onBluetoothDeviceFound","device","devices","name","deviceNamePrefix","setDeviceId","needConnect","bleConnected","computed","totalPrice","pric","goa","goodsObjectArray","singleProduc","product","goods","price","number","buttonMsg","onShow","onHide"],"mappings":"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","file":"pages/order/order.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/order/order.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./order.vue?vue&type=template&id=305fcb26&\"\nimport script from \"./order.vue?vue&type=script&lang=js&\"\nexport * from \"./order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\bear\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('305fcb26', component.options)\n    } else {\n      api.reload('305fcb26', component.options)\n    }\n    module.hot.accept(\"./order.vue?vue&type=template&id=305fcb26&\", function () {\n      api.rerender('305fcb26', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Documents/HBuilderProjects/fmj-lanya/pages/order/order.vue\"\nexport default component.exports","export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=template&id=305fcb26&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tString2Ab,\n\tAb2String,\n\tsleep\n} from '../../utils/index.js'\nimport {\n\tmapMutations,\n\tmapState\n} from 'vuex'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcheckV: true,\n\t\t\tdefaultImg: '../../static/prod.png',\n\t\t\tyouhuiCode: null,\n\t\t\tplaceholder: '兑换码不区分大小写',\n\t\t\tcansubmit: false,\n\t\t\tcanSubmitClass: 'submit-button',\n\t\t\tcanNotSubmitClass: 'can-not-submit'\n\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations([\n\t\t\t'setUserId', 'setDeviceId', 'setServiceId', 'setWriteServiceId', 'setNotifyServiceId', 'setCheckOnlineOrder',\n\t\t\t'setDeviceName', 'setDeviceImei', 'setResponseOrder'\n\t\t]),\n\t\tchangeRadioV() {\n\t\t\tthis.checkV = !this.checkV\n\t\t},\n\t\toepnxieyi() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '用户协议',\n\t\t\t\tcontent: this.machObject.userProtocol,\n\t\t\t\tshowCancel: false,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * 提交订单支付\n\t\t */\n\t\tgotoPay() {\n\t\t\tvar that = this\n\t\t\tif (that.cansubmit) {\n\t\t\t\tif (that.phoneBlueToothCanUse) {\n\t\t\t\t\t//需要同意用户协议\n\t\t\t\t\tif (!that.checkV) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '请同意用户协议',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t//按钮不可点\n\t\t\t\t\tthat.cansubmit = false\n\t\t\t\t\tif (that.bleConnectedStatus && that.writeServiceId != '') {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '加载中'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthat.startService()\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//蓝牙未连接，重新连接\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: '设备连接中,请稍后重试',\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tthat.cansubmit = true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthat.judgeBlueToothCanUse()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * 提交订单，请求网络\n\t\t */\n\t\tcommitOrderRequstNetWork() {\n\t\t\tvar that = this\n\t\t\t//发起网络请求提交订单\n\t\t\tuni.request({\n\t\t\t\turl: that.baseRequestUrl + 'microProgramOrder/commitWeixinMicroOrder',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\torderFrom: 'wx_fmj',\n\t\t\t\t\tuserId: that.userId,\n\t\t\t\t\tdeviceImei: that.deviceImei,\n\t\t\t\t\tvoucherCode: that.youhuiCode,\n\t\t\t\t\tgoodsInfo: JSON.stringify(that.commitGoodsArray)\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tlet param = res.data\n\t\t\t\t\tif (param.code === 1) {\n\t\t\t\t\t\tuni.requestPayment({\n\t\t\t\t\t\t\tprovider: 'wxpay',\n\t\t\t\t\t\t\ttimeStamp: param.timeStamp,\n\t\t\t\t\t\t\tnonceStr: param.nonceStr,\n\t\t\t\t\t\t\tpackage: 'prepay_id=' + param.prepayId,\n\t\t\t\t\t\t\tsignType: 'MD5',\n\t\t\t\t\t\t\tpaySign: param.sign,\n\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t//请求实际命令\n\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\turl: that.baseRequestUrl + 'order/getRealOrder?sysOrderId=' + param.sysOrderId,\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\tif (res.data.code === 1) {\n\t\t\t\t\t\t\t\t\t\t\tlet chargeTimeOrder = res.data.order\n\t\t\t\t\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t\t\t\t\t * 包小于20字节就直接下发\n\t\t\t\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.length <= 40) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(chargeTimeOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar chargeIntervalTimmerId = setInterval(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.indexOf(that.responseOrder) != -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearTimeout(chargeTimeOutTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(that.confirmOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.closeBLEConnection({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../buyfinish/buyfinish'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 200)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar chargeTimeOutTimmerId = setTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.indexOf(that.responseOrder) === -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '设备异常正在退款,请稍后重试',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//发起退款\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tlet orderTime = Math.floor(chargeTimeOrder.length / 40)\n\t\t\t\t\t\t\t\t\t\t\t\t//分包响应数据包\n\t\t\t\t\t\t\t\t\t\t\t\tthat.setResponseOrder('')\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i <= orderTime; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(chargeTimeOrder.substring(i * 40, (i + 1) * 40)),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//延时并拼接响应\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsleep(200)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//在最后一包发送完以后，监听响应\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i == orderTime) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar chargeTimeOutTimmerId = setTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.indexOf(that.responseOrder) === -1 || that.responseOrder === '') {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '设备异常正在退款,请稍后重试',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//发起退款\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 3000)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//定时判断是否相同\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar chargeIntervalTimmerId = setInterval(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (that.responseOrder != '' && chargeTimeOrder.indexOf(that.responseOrder) != -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearTimeout(chargeTimeOutTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(that.confirmOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.closeBLEConnection({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../buyfinish/buyfinish'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 200)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t//服务器响应失败\n\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: '服务器开小差,请稍后重试',\n\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: function(err) {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tthat.cansubmit = true\n\t\t\t\t\t\t\t\t//支付失败的话跳转到首页\n\t\t\t\t\t\t\t\tconsole.error('支付失败' + JSON.stringify(err));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: param.message,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\t//服务器响应失败\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: '服务器开小差,请稍后重试',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\t\tcloseBle() {\n\t\t\tvar that = this\n\t\t\t//关闭连接\n\t\t\tuni.closeBLEConnection({\n\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tuni.closeBluetoothAdapter({\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tconsole.log('页面隐藏后关闭蓝牙成功')\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tconnectBle() {\n\t\t\tvar that = this\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tif (that.deviceId && that.deviceId != '') {\n\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t//连接蓝牙\n\t\t\t\t\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('连接蓝牙成功', res)\n\t\t\t\t\t\t\t\t\t\t//即使知道了特征id也要搜索一下\n\t\t\t\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\tserviceId: that.mainUUID,\n\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.mainUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.notifyUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('开启监听服务成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//写入Q01\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.mainUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(that.checkOnlineOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('writeBLECharacteristicValue success', res.errMsg)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar searchTimeoutId = setTimeout(function() {\n\t\t\t\t\t\t\tif (that.deviceId == '') {\n\t\t\t\t\t\t\t\tconsole.error('未搜索到设备')\n\t\t\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\tcontent: '未搜索到设备,请靠近设备后重试',\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 5000)\n\t\t\t\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\tuni.onBluetoothDeviceFound(function(res) {\n\t\t\t\t\t\t\t\t\tlet device = res.devices[0]\n\t\t\t\t\t\t\t\t\tconsole.log('device', device)\n\t\t\t\t\t\t\t\t\tif (device.name != '' && device.name == that.deviceNamePrefix + that.deviceImei) {\n\t\t\t\t\t\t\t\t\t\tthat.setDeviceId(device.deviceId)\n\t\t\t\t\t\t\t\t\t\tclearTimeout(searchTimeoutId)\n\t\t\t\t\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('找到设备后关闭发现服务成功', device.deviceId)\n\t\t\t\t\t\t\t\t\t\t\t\t//连接蓝牙\n\t\t\t\t\t\t\t\t\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('连接蓝牙成功', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//即使知道了特征id也要搜索一下\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.mainUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.mainUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.notifyUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('开启监听服务成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//写入Q01\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.mainUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeUUID,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(that.checkOnlineOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('writeBLECharacteristicValue success', res.errMsg)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tneedConnect() {\n\t\t\tif (!bleConnected) {\n\t\t\t\t//需要重新连接\n\t\t\t\tthis.connectBle()\n\t\t\t}\n\t\t}\n\n\t},\n\tcomputed: {\n\t\t...mapState(['phoneBlueToothCanUse', 'baseRequestUrl', 'charging', 'deviceNamePrefix', 'notifyIdPrefix',\n\t\t\t'writeIdPrefix', 'serviceIdPrefix',\n\t\t\t'deviceImei', 'deviceName', 'deviceId',\n\t\t\t'serviceId', 'notifyServiceId', 'writeServiceId', 'bleConnectedStatus', 'responseOrder', 'checkOnlineOrder',\n\t\t\t'confirmOrder',\n\t\t\t'goodsObjectArray', 'commitGoodsArray', 'userId', 'bleConnected', 'mainUUID', 'writeUUID', 'notifyUUID'\n\t\t]),\n\t\ttotalPrice() {\n\t\t\tlet pric = 0\n\t\t\tlet goa = this.goodsObjectArray\n\t\t\tfor (var i = 0; i < goa.length; i++) {\n\t\t\t\tlet singleProduc = goa[i]\n\t\t\t\tpric += singleProduc.product.goods.price * singleProduc.number\n\t\t\t}\n\t\t\treturn pric\n\t\t},\n\t\tbuttonMsg() {\n\t\t\treturn this.cansubmit ? '立即支付' : '连接中'\n\t\t}\n\t},\n\tonShow() {\n\t\t//判断蓝牙是否需要连接\n\t\tthis.needConnect()\n\t},\n\tonHide() {\n\t\t//关闭蓝牙\n\t\tthis.closeBle()\n\t}\n\n}\n","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}