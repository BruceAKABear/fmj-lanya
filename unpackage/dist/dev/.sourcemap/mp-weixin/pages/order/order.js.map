{"version":3,"sources":["webpack:///C:/Users/blab/Desktop/fmj-lanya/main.js","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/order/order.vue?0e5e","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/order/order.vue?a29c","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/order/order.vue?6518","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/order/order.vue?8227","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/order/order.vue","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/order/order.vue?5cbd","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/order/order.vue?8e3b"],"names":["createPage","Page","data","checkV","defaultImg","youhuiCode","placeholder","cansubmit","canSubmitClass","canNotSubmitClass","methods","changeRadioV","oepnxieyi","uni","showModal","title","content","machObject","userProtocol","showCancel","success","res","confirm","gotoPay","that","showToast","icon","mask","duration","bleConnected","showLoading","commitOrderRequstNetWork","request","url","baseRequestUrl","method","orderFrom","userId","deviceImei","voucherCode","goodsInfo","JSON","stringify","commitGoodsArray","param","code","requestPayment","provider","timeStamp","nonceStr","package","prepayId","signType","paySign","sign","sysOrderId","chargeTimeOrder","order","length","writeBLECharacteristicValue","deviceId","serviceId","characteristicId","value","console","warn","confirmOrder","hideLoading","redirectTo","complete","error","fail","orderTime","Math","floor","setResponseOrder","i","substring","reLaunch","err","message","closeBle","closeBLEConnection","closeBluetoothAdapter","log","connectBle","blueToothOpen","createBLEConnection","getBLEDeviceCharacteristics","notifyBLECharacteristicValueChange","state","info","setIsFirst","searchTimeoutId","setTimeout","stopBluetoothDevicesDiscovery","startBluetoothDevicesDiscovery","onBluetoothDeviceFound","device","devices","name","deviceNamePrefix","clearTimeout","setDeviceId","getAndListenBTState","openBluetoothAdapter","setBlueToothOpen","listenResponseOrder","timeLast","onBLECharacteristicValueChange","Date","getTime","responseOrder","resOrder","indexOf","batteryNumber","setbattery","parseInt","String","fromCharCode","computed","totalPrice","pric","goa","goodsObjectArray","singleProduc","product","goods","price","number","buttonMsg","onShow","onLoad"],"mappings":"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","file":"pages/order/order.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/order/order.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order.vue?vue&type=template&id=12a546ec&\"\nvar renderjs\nimport script from \"./order.vue?vue&type=script&lang=js&\"\nexport * from \"./order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\blab\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('12a546ec')) {\n      api.createRecord('12a546ec', component.options)\n    } else {\n      api.reload('12a546ec', component.options)\n    }\n    module.hot.accept(\"./order.vue?vue&type=template&id=12a546ec&\", function () {\n      api.rerender('12a546ec', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"fmj-lanya/pages/order/order.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=template&id=12a546ec&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tString2Ab,\n\tAb2String,\n\tsleep\n} from '../../utils/index.js'\nimport {\n\tmapMutations,\n\tmapState\n} from 'vuex'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcheckV: true,\n\t\t\tdefaultImg: '../../static/prod.png',\n\t\t\tyouhuiCode: null,\n\t\t\tplaceholder: '兑换码不区分大小写',\n\t\t\tcansubmit: true,\n\t\t\tcanSubmitClass: 'submit-button',\n\t\t\tcanNotSubmitClass: 'can-not-submit'\n\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations([\n\t\t\t'setUserId', 'setDeviceId',\n\t\t\t'setDeviceName', 'setDeviceImei', 'setResponseOrder', 'setIsFirst', 'setBlueToothOpen'\n\t\t]),\n\t\tchangeRadioV() {\n\t\t\tthis.checkV = !this.checkV\n\t\t},\n\t\toepnxieyi() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '用户协议',\n\t\t\t\tcontent: this.machObject.userProtocol,\n\t\t\t\tshowCancel: false,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * 提交订单支付\n\t\t */\n\t\tgotoPay() {\n\t\t\tvar that = this\n\t\t\tif (that.cansubmit) {\n\t\t\t\t//需要同意用户协议\n\t\t\t\tif (!that.checkV) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请同意用户协议',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t});\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t//按钮不可点\n\t\t\t\tthat.cansubmit = false\n\t\t\t\tif (that.bleConnected) {\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: '加载中'\n\t\t\t\t\t})\n\t\t\t\t\tthat.commitOrderRequstNetWork()\n\t\t\t\t} else {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: '设备连接中，请稍后',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * 提交订单，请求网络\n\t\t */\n\t\tcommitOrderRequstNetWork() {\n\t\t\tvar that = this\n\t\t\t//发起网络请求提交订单\n\t\t\tuni.request({\n\t\t\t\turl: that.baseRequestUrl + 'microProgramOrder/commitWeixinMicroOrder',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\torderFrom: 'wx_fmj',\n\t\t\t\t\tuserId: that.userId,\n\t\t\t\t\tdeviceImei: that.deviceImei,\n\t\t\t\t\tvoucherCode: that.youhuiCode,\n\t\t\t\t\tgoodsInfo: JSON.stringify(that.commitGoodsArray)\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tlet param = res.data\n\t\t\t\t\tif (param.code === 1) {\n\t\t\t\t\t\tuni.requestPayment({\n\t\t\t\t\t\t\tprovider: 'wxpay',\n\t\t\t\t\t\t\ttimeStamp: param.timeStamp,\n\t\t\t\t\t\t\tnonceStr: param.nonceStr,\n\t\t\t\t\t\t\tpackage: 'prepay_id=' + param.prepayId,\n\t\t\t\t\t\t\tsignType: 'MD5',\n\t\t\t\t\t\t\tpaySign: param.sign,\n\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t//请求实际命令\n\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\turl: that.baseRequestUrl + 'order/getRealOrder?sysOrderId=' + param.sysOrderId,\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\tif (res.data.code === 1) {\n\t\t\t\t\t\t\t\t\t\t\tlet chargeTimeOrder = res.data.order\n\t\t\t\t\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t\t\t\t\t * 包小于20字节就直接下发\n\t\t\t\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.length <= 40) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(chargeTimeOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('下发真实命令成功', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(that.confirmOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('下发确认命令成功', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../buyfinish/buyfinish',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('路由执行成功，结果为：', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('下发确认命令失败', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.warn('下发真实命令失败', res)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tlet orderTime = Math.floor(chargeTimeOrder.length / 40)\n\t\t\t\t\t\t\t\t\t\t\t\t//分包响应数据包\n\t\t\t\t\t\t\t\t\t\t\t\tthat.setResponseOrder('')\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i <= orderTime; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(chargeTimeOrder.substring(i * 40, (i + 1) * 40)),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//延时并拼接响应\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsleep(200)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//在最后一包发送完以后，监听响应\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (i == orderTime) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(that.confirmOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../buyfinish/buyfinish',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcomplete(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('路由执行成功，结果为：', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t//服务器响应失败\n\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: '服务器开小差,请稍后重试',\n\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: function(err) {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tthat.cansubmit = true\n\t\t\t\t\t\t\t\t//支付失败的话跳转到首页\n\t\t\t\t\t\t\t\tconsole.error('支付失败' + JSON.stringify(err));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: param.message,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\t//服务器响应失败\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: '服务器开小差,请稍后重试',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\t\tcloseBle() {\n\t\t\tvar that = this\n\t\t\t//关闭连接\n\t\t\tuni.closeBLEConnection({\n\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tuni.closeBluetoothAdapter({\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tconsole.log('页面隐藏后关闭蓝牙成功')\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tconnectBle() {\n\t\t\tvar that = this\n\t\t\t//1.判断手机蓝牙是否打开\n\t\t\tconsole.warn('buy页面页面显示获取到的蓝牙状态为', that.blueToothOpen)\n\t\t\tif (that.blueToothOpen) {\n\t\t\t\tif (that.deviceId != '') {\n\t\t\t\t\t//如果设备id存在就直接连接，同时下发Q01\n\t\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tconsole.log('连接蓝牙成功', res)\n\t\t\t\t\t\t\t//即使知道了特征id也要搜索一下\n\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400003-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('开启监听服务成功')\n\t\t\t\t\t\t\t\t\t\t\t//写入Q01\n\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab('AABB00065130313D3140CB'),\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.info('下发在线命令成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t//只要调用了就不是第一次了\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setIsFirst(false)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\tconsole.warn('重新连接后错误', res)\n\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\t//如果设备id不存在就信搜索设备后连接\n\t\t\t\t\t//1. 超时提示\n\t\t\t\t\tvar searchTimeoutId = setTimeout(function() {\n\t\t\t\t\t\tif (that.deviceId == '') {\n\t\t\t\t\t\t\tconsole.error('未搜索到设备')\n\t\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\tcontent: '未搜索到设备,请靠近设备后重试',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 5000)\n\t\t\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tuni.onBluetoothDeviceFound(function(res) {\n\t\t\t\t\t\t\t\tlet device = res.devices[0]\n\t\t\t\t\t\t\t\tconsole.log('device', device)\n\t\t\t\t\t\t\t\tif (device.name != '' && device.name == that.deviceNamePrefix + that.deviceImei) {\n\t\t\t\t\t\t\t\t\tclearTimeout(searchTimeoutId)\n\t\t\t\t\t\t\t\t\tthat.setDeviceId(device.deviceId)\n\t\t\t\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('找到设备后关闭发现服务成功', device.deviceId)\n\t\t\t\t\t\t\t\t\t\t\t//连接蓝牙\n\t\t\t\t\t\t\t\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('连接蓝牙成功', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t//即使知道了特征id也要搜索一下\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400003-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('开启监听服务成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//写入Q01\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab('AABB00065130313D3140CB'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.info('下发Q01成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//只要调用了就不是第一次了\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setIsFirst(false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t//未开启蓝牙提示开启蓝牙\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '请开启手机蓝牙',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tconsole.info('提示用户开启蓝牙后用户点击确认')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tgetAndListenBTState() {\n\t\t\tvar that = this\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconsole.warn('开启适配器状态成功，意味着蓝牙开启', res)\n\t\t\t\t\tthat.setBlueToothOpen(true)\n\t\t\t\t\tthat.connectBle()\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\t//开启失败的话说明没有开启手机蓝牙\n\t\t\t\t\tconsole.warn('开启适配器失败，意味着没有开启蓝牙', res)\n\t\t\t\t\tthat.connectBle()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tlistenResponseOrder() {\n\t\t\tvar that = this\n\t\t\tlet timeLast = 0\n\t\t\tuni.onBLECharacteristicValueChange(function(res) {\n\t\t\t\tif (new Date().getTime() - timeLast < 200) {\n\t\t\t\t\tthat.setResponseOrder(that.responseOrder + Ab2String(res.value))\n\t\t\t\t\tconsole.log('分包相应的结果合并为', that.responseOrder)\n\t\t\t\t} else {\n\t\t\t\t\ttimeLast = new Date().getTime()\n\t\t\t\t\tlet resOrder = Ab2String(res.value)\n\t\t\t\t\tif (resOrder.indexOf('5130383D') != -1) {\n\t\t\t\t\t\tlet batteryNumber = resOrder.substring(8, 12)\n\t\t\t\t\t\tthat.setbattery(parseInt(String.fromCharCode(parseInt(batteryNumber.substring(0, 2), 16)) + String.fromCharCode(\n\t\t\t\t\t\t\tparseInt(batteryNumber.substring(2), 16))))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthat.setResponseOrder(resOrder)\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('监听到设备的响应为', resOrder)\n\t\t\t\t}\n\n\t\t\t})\n\t\t}\n\n\t},\n\tcomputed: {\n\t\t...mapState(['baseRequestUrl', 'deviceNamePrefix',\n\t\t\t'deviceImei', 'deviceName', 'deviceId',\n\t\t\t'responseOrder',\n\t\t\t'confirmOrder',\n\t\t\t'goodsObjectArray', 'commitGoodsArray', 'userId', 'bleConnected', 'mainUUID', 'writeUUID', 'notifyUUID',\n\t\t\t'blueToothOpen'\n\t\t]),\n\t\ttotalPrice() {\n\t\t\tlet pric = 0\n\t\t\tlet goa = this.goodsObjectArray\n\t\t\tfor (var i = 0; i < goa.length; i++) {\n\t\t\t\tlet singleProduc = goa[i]\n\t\t\t\tpric += singleProduc.product.goods.price * singleProduc.number\n\t\t\t}\n\t\t\treturn pric\n\t\t},\n\t\tbuttonMsg() {\n\t\t\treturn this.cansubmit && this.bleConnected ? '立即支付' : '订单加载中'\n\t\t}\n\t},\n\tonShow() {\n\n\t},\n\tonLoad() {\n\n\t}\n}\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}