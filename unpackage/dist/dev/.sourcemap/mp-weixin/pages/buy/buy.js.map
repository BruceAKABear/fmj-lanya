{"version":3,"sources":["webpack:///C:/Users/blab/Desktop/fmj-lanya/main.js","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/buy/buy.vue?9ee5","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/buy/buy.vue?011e","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/buy/buy.vue?7389","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/buy/buy.vue?475e","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/buy/buy.vue","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/buy/buy.vue?918a","webpack:///C:/Users/blab/Desktop/fmj-lanya/pages/buy/buy.vue?e0d4"],"names":["createPage","Page","data","defaultImg","goodsList","banner","mallUrl","servicePhone","userProtocol","stylefull","styleEmpty","notconnect","components","uniIcon","uniNumberBox","methods","openUserPro","uni","showModal","title","content","showCancel","success","res","confirm","selectedGoods","value","goods","empty","pAndN","cabinetNo","id","goodsCount","parseInt","returnCount","goodsId","goodsPrice","parseFloat","price","goodsName","name","showObj","product","number","selectedCommitGoodsArray","commitGoodsArray","selectedGoodsObjectArray","goodsObjectArray","returnObj","containsObejct","flag","splice","index","push","showObjArray","setCommitGoodsArray","setGoodsObjectArray","objectArray","productObject","length","i","callKefu","makePhoneCall","phoneNumber","queryAllGoods","that","request","url","baseRequestUrl","deviceImei","method","resm","status","mctId","resb","wholedata","brandInfo","setMachObject","setNavigationBarTitle","mobileTitle","imageInfoArray","JSON","parse","imgInfo","resg","message","resgs","reLaunch","state","setVoucherState","resbs","resms","gopay","setDeviceIdFromPath","param","q","sanUrl","decodeURIComponent","scanImei","substring","indexOf","setDeviceImei","imei","userLogin","login","loginRes","weixinCode","code","setUserId","openid","getUserInfo","provider","infoRes","console","log","fail","judgePlatformVersion","versionRight","judgeLocationOpen","getSystemInfo","platform","version","setversionRight","getLocation","type","setOpenLocation","connectBle","openSetting","authorize","scope","closeBle","closeBLEConnection","deviceId","closeBluetoothAdapter","warn","blueToothOpen","createBLEConnection","getBLEDeviceCharacteristics","serviceId","notifyBLECharacteristicValueChange","characteristicId","writeBLECharacteristicValue","info","setIsFirst","searchTimeoutId","setTimeout","error","stopBluetoothDevicesDiscovery","startBluetoothDevicesDiscovery","onBluetoothDeviceFound","device","devices","localName","deviceNamePrefix","clearTimeout","setDeviceId","getAndListenBTState","openBluetoothAdapter","setBlueToothOpen","onBluetoothAdapterStateChange","isFirst","available","discovering","$emit","computed","havaSelectGoods","showText","totalP","forEach","item","toFixed","batterylevel","battery","onLoad","params","$once","onShow","onHide"],"mappings":"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","file":"pages/buy/buy.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/buy/buy.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buy.vue?vue&type=template&id=5ae8909c&\"\nvar renderjs\nimport script from \"./buy.vue?vue&type=script&lang=js&\"\nexport * from \"./buy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buy.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\blab\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5ae8909c')) {\n      api.createRecord('5ae8909c', component.options)\n    } else {\n      api.reload('5ae8909c', component.options)\n    }\n    module.hot.accept(\"./buy.vue?vue&type=template&id=5ae8909c&\", function () {\n      api.rerender('5ae8909c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"fmj-lanya/pages/buy/buy.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=template&id=5ae8909c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapMutations,\n\tmapState\n} from 'vuex'\n//导入工具类\nimport {\n\tisNeedVersion,\n\tString2Ab\n} from '../../utils/index.js'\nimport uniIcon from '../../components/uni-icons/uni-icons.vue'\nimport uniNumberBox from \"../../components/uni-number-box/uni-number-box.vue\"\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tdefaultImg: '../../static/prod.png',\n\t\t\tgoodsList: [],\n\t\t\tbanner: '',\n\t\t\tmallUrl: '',\n\t\t\tservicePhone: '',\n\t\t\tuserProtocol: '',\n\t\t\tstylefull: 'goods-item',\n\t\t\tstyleEmpty: 'goods-item-empty',\n\t\t\tnotconnect: '蓝牙未连接'\n\t\t}\n\t},\n\tcomponents: {\n\t\tuniIcon,\n\t\tuniNumberBox\n\t},\n\tmethods: {\n\t\t...mapMutations(['setGoodsObjectArray', 'setMachObject', 'setVoucherState', 'setCommitGoodsArray', 'setUserId',\n\t\t\t'setDeviceImei', 'setOpenLocation', 'setDeviceId', 'setversionRight', 'setBlueToothOpen', 'setIsFirst'\n\t\t]),\n\n\t\topenUserPro() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '用户协议',\n\t\t\t\tcontent: this.userProtocol ? this.userProtocol : '默认用户协议',\n\t\t\t\tshowCancel: false,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t//选中商品\n\t\tselectedGoods(value, goods) {\n\t\t\tif (goods.empty) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: '此商品已经售空，请选择其他商品',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t//-------------购买的商品对象\n\t\t\tlet pAndN = {}\n\t\t\t//货道号\n\t\t\tpAndN.cabinetNo = goods.id\n\t\t\tpAndN.goodsCount = parseInt(value)\n\t\t\tpAndN.returnCount = 0\n\t\t\tpAndN.goodsId = goods.goods.id\n\t\t\tpAndN.goodsPrice = parseFloat(goods.goods.price)\n\t\t\tpAndN.goodsName = goods.goods.name\n\t\t\t//-----------显示的商品\n\t\t\tlet showObj = {}\n\t\t\tshowObj.product = goods\n\t\t\tshowObj.number = parseInt(value)\n\n\t\t\tlet selectedCommitGoodsArray = this.commitGoodsArray\n\t\t\tlet selectedGoodsObjectArray = this.goodsObjectArray\n\n\t\t\tlet returnObj = this.containsObejct(selectedCommitGoodsArray, goods)\n\t\t\tif (returnObj.flag) {\n\t\t\t\tif (value == 0) {\n\t\t\t\t\tselectedCommitGoodsArray.splice(returnObj.index, 1);\n\t\t\t\t\tselectedGoodsObjectArray.splice(returnObj.index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tselectedCommitGoodsArray[returnObj.index] = pAndN\n\t\t\t\t\tselectedGoodsObjectArray[returnObj.index] = showObj\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tselectedCommitGoodsArray.push(pAndN)\n\t\t\t\tselectedGoodsObjectArray.push(showObj)\n\t\t\t}\n\t\t\tthis.showObjArray = selectedCommitGoodsArray\n\t\t\t//先清空\n\t\t\tthis.setCommitGoodsArray([])\n\t\t\t//再插入\n\t\t\tthis.setCommitGoodsArray(selectedCommitGoodsArray)\n\t\t\tthis.setGoodsObjectArray(selectedGoodsObjectArray)\n\t\t\t//选中商品，跳转订单页面，显示支付\n\n\t\t},\n\t\tcontainsObejct(objectArray, productObject) {\n\t\t\tlet returnObj = {}\n\t\t\treturnObj.flag = false\n\t\t\t//如果为空，那就是不包含\n\t\t\tif (objectArray.length == 0) {\n\t\t\t\treturn returnObj\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < objectArray.length; i++) {\n\t\t\t\t\tif (objectArray[i].goodsId == productObject.goods.id) {\n\t\t\t\t\t\treturnObj.flag = true\n\t\t\t\t\t\treturnObj.index = i\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn returnObj\n\t\t\t}\n\t\t},\n\t\tcallKefu() {\n\t\t\tuni.makePhoneCall({\n\t\t\t\tphoneNumber: this.servicePhone\n\t\t\t});\n\n\t\t},\n\t\tqueryAllGoods() {\n\t\t\tvar that = this\n\t\t\tuni.request({\n\t\t\t\turl: that.baseRequestUrl + 'infos/getMctIdByImei?deviceImei=' + that.deviceImei,\n\t\t\t\tmethod: 'GET',\n\t\t\t\tsuccess: (resm) => {\n\t\t\t\t\tif (resm.data.status) {\n\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\turl: that.baseRequestUrl + 'infos/getBrandInfoByMctId/?mctId=' + resm.data.data.mctId,\n\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\tsuccess: (resb) => {\n\t\t\t\t\t\t\t\tif (resb.data.status) {\n\t\t\t\t\t\t\t\t\tlet wholedata = resb.data.data.brandInfo\n\t\t\t\t\t\t\t\t\tthat.setMachObject(wholedata)\n\t\t\t\t\t\t\t\t\tuni.setNavigationBarTitle({\n\t\t\t\t\t\t\t\t\t\ttitle: wholedata.mobileTitle\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tthat.servicePhone = wholedata.servicePhone\n\t\t\t\t\t\t\t\t\tthat.userProtocol = wholedata.userProtocol\n\t\t\t\t\t\t\t\t\tthat.mallUrl = wholedata.mallUrl\n\t\t\t\t\t\t\t\t\tlet imageInfoArray = JSON.parse(wholedata.imgInfo)\n\t\t\t\t\t\t\t\t\tthat.banner = imageInfoArray[0].url\n\t\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\t\turl: that.baseRequestUrl + 'infos/getDeviceGoodsByImei?deviceImei=' + that.deviceImei,\n\t\t\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\t\t\tsuccess: (resg) => {\n\t\t\t\t\t\t\t\t\t\t\tif (resg.data.status) {\n\t\t\t\t\t\t\t\t\t\t\t\tthat.goodsList = resg.data.data.goodsList\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: resg.data.message,\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (resgs) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (resgs.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t//请求是否开启优惠券\n\t\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\t\turl: that.baseRequestUrl + 'infos/getVoucherStateByMctId?mctId=' + wholedata.mctId,\n\t\t\t\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\tif (res.data.status) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.data.data.state) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setVoucherState(true)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: res.data.message,\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\tcontent: resb.data.message,\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\tsuccess: (resbs) => {\n\t\t\t\t\t\t\t\t\t\t\tif (resbs.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: resm.data.message,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: (resms) => {\n\t\t\t\t\t\t\t\tif (resms.confirm) {\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tgopay() {\n\t\t\tif (this.commitGoodsArray.length == 0) {\n\t\t\t\treturn\n\t\t\t} else {\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl: '../order/order'\n\t\t\t\t})\n\t\t\t}\n\n\t\t},\n\t\t/**\n\t\t * 从请求中封装数据\n\t\t */\n\t\tsetDeviceIdFromPath(param) {\n\t\t\tif (typeof(param.q) != 'undefined') {\n\t\t\t\t//微信直接扫码进入\n\t\t\t\tlet sanUrl = decodeURIComponent(param.q)\n\t\t\t\tlet scanImei = sanUrl.substring(sanUrl.indexOf('imei=') + 5)\n\t\t\t\tthis.setDeviceImei(scanImei)\n\t\t\t} else {\n\t\t\t\t//从index扫码跳转\n\t\t\t\tthis.setDeviceImei(param.imei)\n\t\t\t}\n\t\t},\n\t\tuserLogin() {\n\t\t\tvar that = this\n\t\t\tuni.login({\n\t\t\t\tsuccess: function(loginRes) {\n\t\t\t\t\tlet weixinCode = loginRes.code\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\turl: that.baseRequestUrl + 'userInfo/getWxUserInfo?code=' + weixinCode + '&requestFrom=wx_fmj',\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t//数据响应成功\n\t\t\t\t\t\t\tif (res.data.status) {\n\t\t\t\t\t\t\t\tthat.setUserId(res.data.data.openid)\n\t\t\t\t\t\t\t\t// 获取用户信息\n\t\t\t\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\t\t\t\tsuccess: function(infoRes) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('用户昵称为：', infoRes);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//服务器响应失败\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\tcontent: res.data.message,\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\t//服务器响应失败\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\tcontent: '服务器开小差了,请稍后重试',\n\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * 判断微信版本是否是符合要求\n\t\t * \n\t\t */\n\t\tjudgePlatformVersion() {\n\t\t\tvar that = this\n\t\t\tif (that.versionRight) {\n\t\t\t\t//判断是否授予定位\n\t\t\t\tthat.judgeLocationOpen()\n\t\t\t} else {\n\t\t\t\t//获取到设备信息\n\t\t\t\tuni.getSystemInfo({\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\tif (!isNeedVersion(res.platform, res.version)) {\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tcontent: '当前微信版本过低,请更新至最新版本才能连接蓝牙哦!',\n\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log('版本验证通过')\n\t\t\t\t\t\t\tthat.setversionRight(true)\n\t\t\t\t\t\t\t//判断是否授予定位\n\t\t\t\t\t\t\tthat.judgeLocationOpen()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t}\n\t\t},\n\t\tjudgeLocationOpen() {\n\t\t\tvar that = this\n\t\t\t//兼容微信奇怪的要求，使用蓝牙需要开启位置权限\n\t\t\tuni.getLocation({\n\t\t\t\ttype: 'wgs84',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tthat.setOpenLocation(true)\n\t\t\t\t\t//判断蓝牙是否打开\n\n\t\t\t\t\t//连接蓝牙\n\t\t\t\t\tthat.connectBle()\n\n\t\t\t\t},\n\t\t\t\tfail() {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: '请授予小程序获取位置功能',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.openSetting({\n\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\tuni.authorize({\n\t\t\t\t\t\t\t\t\t\t\tscope: 'scope.userLocation',\n\t\t\t\t\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.getLocation({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'wgs84',\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setOpenLocation(true)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户手动开启定位权限成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '请授予小程序获取位置功能后重试',\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tcloseBle() {\n\t\t\tvar that = this\n\t\t\t//关闭连接\n\t\t\tuni.closeBLEConnection({\n\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tuni.closeBluetoothAdapter({\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tconsole.log('页面隐藏后关闭蓝牙成功')\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tconnectBle() {\n\t\t\tvar that = this\n\t\t\t//1.判断手机蓝牙是否打开\n\t\t\tconsole.warn('buy页面页面显示获取到的蓝牙状态为', that.blueToothOpen)\n\t\t\tif (that.blueToothOpen) {\n\t\t\t\tif (that.deviceId != '') {\n\t\t\t\t\t//如果设备id存在就直接连接，同时下发Q01\n\t\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tconsole.log('连接蓝牙成功', res)\n\t\t\t\t\t\t\t//即使知道了特征id也要搜索一下\n\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400003-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('开启监听服务成功')\n\t\t\t\t\t\t\t\t\t\t\t//写入Q01\n\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab('AABB00065130313D3140CB'),\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.info('下发在线命令成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t//只要调用了就不是第一次了\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setIsFirst(false)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\tconsole.warn('重新连接后错误', res)\n\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\t//如果设备id不存在就信搜索设备后连接\n\t\t\t\t\t//1. 超时提示\n\t\t\t\t\tvar searchTimeoutId = setTimeout(function() {\n\t\t\t\t\t\tif (that.deviceId == '') {\n\t\t\t\t\t\t\tconsole.error('未搜索到设备')\n\t\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\tcontent: '未搜索到设备,请靠近设备后重试',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 5000)\n\t\t\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tuni.onBluetoothDeviceFound(function(res) {\n\t\t\t\t\t\t\t\tlet device = res.devices[0]\n\t\t\t\t\t\t\t\tconsole.log('device', device)\n\t\t\t\t\t\t\t\tif (device.localName != '' && device.localName == that.deviceNamePrefix + that.deviceImei) {\n\t\t\t\t\t\t\t\t\tclearTimeout(searchTimeoutId)\n\t\t\t\t\t\t\t\t\tthat.setDeviceId(device.deviceId)\n\t\t\t\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('找到设备后关闭发现服务成功', device.deviceId)\n\t\t\t\t\t\t\t\t\t\t\t//连接蓝牙\n\t\t\t\t\t\t\t\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('连接蓝牙成功', res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t//即使知道了特征id也要搜索一下\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400003-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('开启监听服务成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//写入Q01\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: '6E400001-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: '6E400002-B5A3-F393-E0A9-E50E24DCCA9E',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab('AABB00065130313D3140CB'),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.info('下发Q01成功')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//只要调用了就不是第一次了\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setIsFirst(false)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t//未开启蓝牙提示开启蓝牙\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '请开启手机蓝牙',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tconsole.info('提示用户开启蓝牙后用户点击确认')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tgetAndListenBTState() {\n\t\t\tvar that = this\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconsole.warn('开启适配器状态成功，意味着蓝牙开启', res)\n\t\t\t\t\tthat.setBlueToothOpen(true)\n\t\t\t\t\tthat.connectBle()\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\t//开启失败的话说明没有开启手机蓝牙\n\t\t\t\t\tconsole.warn('开启适配器失败，意味着没有开启蓝牙', res)\n\t\t\t\t\tthat.connectBle()\n\t\t\t\t}\n\t\t\t})\n\t\t\t//监听手机蓝牙状态\n\t\t\tuni.onBluetoothAdapterStateChange(function(res) {\n\t\t\t\tconsole.warn('监听蓝牙的状态', res)\n\t\t\t\tif ((!that.isFirst) && res.available && (!res.discovering)) {\n\t\t\t\t\tuni.$emit('runtimebtreopen', '')\n\t\t\t\t} else if ((!that.isFirst) && (!res.available) && (!res.discovering)) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\tcontent: '使用小程序时请开启手机蓝牙功能',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t}\n\n\t},\n\tcomputed: {\n\t\t...mapState(['deviceImei', 'baseRequestUrl', 'commitGoodsArray', 'goodsObjectArray', 'bleConnected', 'deviceId',\n\t\t\t'deviceNamePrefix', 'mainUUID', 'writeUUID', 'checkOnlineOrder', 'notifyUUID', 'versionRight', 'battery',\n\t\t\t'blueToothOpen', 'isFirst', 'platform'\n\t\t]),\n\t\thavaSelectGoods() {\n\t\t\treturn this.commitGoodsArray.length != 0\n\t\t},\n\t\tshowText() {\n\t\t\tlet selectedCommitGoodsArray = this.commitGoodsArray\n\t\t\tif (selectedCommitGoodsArray.length == 0) {\n\t\t\t\treturn '未选购商品'\n\t\t\t} else {\n\t\t\t\tlet totalP = 0\n\t\t\t\tselectedCommitGoodsArray.forEach(function(item) {\n\t\t\t\t\ttotalP = totalP + (item.goodsCount * item.goodsPrice)\n\n\t\t\t\t})\n\t\t\t\treturn '总计¥' + totalP.toFixed(2)\n\t\t\t}\n\t\t},\n\t\tbatterylevel() {\n\t\t\treturn this.battery\n\n\t\t}\n\t},\n\t//页面加载时查询运营商的banner\n\tonLoad(params) {\n\t\tthis.setDeviceIdFromPath(params)\n\t\tvar that = this\n\t\tuni.$once('runtimebtreopen', function(data) {\n\t\t\tif ('android' == that.platform) {\n\t\t\t\tconsole.warn('android系统')\n\t\t\t\tuni.closeBluetoothAdapter({\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log('重连时关闭适配器成功')\n\t\t\t\t\t\tuni.openBluetoothAdapter({\n\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\tthat.setDeviceId('')\n\t\t\t\t\t\t\t\tthat.connectBle()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tfail(res) {\n\t\t\t\t\t\tconsole.error('重连时关闭适配器失败', res)\n\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t//ios直连\n\t\t\t\tthat.connectBle()\n\t\t\t}\n\t\t})\n\t\t//用户静默登录\n\t\tthis.userLogin()\n\t\t//封装请求参数\n\t\tthis.setCommitGoodsArray([])\n\t\tthis.setGoodsObjectArray([])\n\t\tthis.queryAllGoods()\n\t},\n\n\tonShow() {\n\t\t//\n\t\tthis.getAndListenBTState()\n\t},\n\tonHide() {\n\t\t//关闭蓝牙连接\n\t\tthis.closeBle()\n\t}\n}\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}